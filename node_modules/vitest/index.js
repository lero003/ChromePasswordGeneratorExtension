const contextKey = Symbol.for('mini-vitest-context');

function getContext() {
  const context = globalThis[contextKey];
  if (!context) {
    throw new Error('Mini Vitest context is not initialised. Use the bundled CLI to run tests.');
  }
  return context;
}

export function describe(name, fn) {
  return getContext().describe(name, fn);
}

export function it(name, fn) {
  return getContext().it(name, fn);
}

export const test = it;

export function expect(value) {
  return getContext().expect(value);
}
